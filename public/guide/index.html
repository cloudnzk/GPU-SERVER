<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>指南 | GPU-SERVER</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Lab GPU server configuration, management, usage documentation.">
    
    <link rel="preload" href="/assets/css/0.styles.e8fa2144.css" as="style"><link rel="preload" href="/assets/js/app.1384cd88.js" as="script"><link rel="preload" href="/assets/js/2.4370fa30.js" as="script"><link rel="preload" href="/assets/js/10.0ed138c0.js" as="script"><link rel="prefetch" href="/assets/js/3.e16777bb.js"><link rel="prefetch" href="/assets/js/4.7ba86250.js"><link rel="prefetch" href="/assets/js/5.6ce3d757.js"><link rel="prefetch" href="/assets/js/6.66a8fb3c.js"><link rel="prefetch" href="/assets/js/7.17c5cbd3.js"><link rel="prefetch" href="/assets/js/8.b97c2ac3.js"><link rel="prefetch" href="/assets/js/9.72eff0de.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8fa2144.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">GPU-SERVER</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  指南
</a></div><div class="nav-item"><a href="/configure/" class="nav-link">
  配置
</a></div><div class="nav-item"><a href="/admin/" class="nav-link">
  管理
</a></div><div class="nav-item"><a href="https://github.com/cloudnzk/GPU-SERVER" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  指南
</a></div><div class="nav-item"><a href="/configure/" class="nav-link">
  配置
</a></div><div class="nav-item"><a href="/admin/" class="nav-link">
  管理
</a></div><div class="nav-item"><a href="https://github.com/cloudnzk/GPU-SERVER" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/#默认环境" class="sidebar-link">默认环境</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide/#ssh远程连接" class="sidebar-link">SSH远程连接</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/#默认终端" class="sidebar-link">默认终端</a></li><li class="sidebar-sub-header"><a href="/guide/#vs-code" class="sidebar-link">VS Code</a></li><li class="sidebar-sub-header"><a href="/guide/#termius" class="sidebar-link">Termius</a></li></ul></li><li><a href="/guide/#深度学习环境安装" class="sidebar-link">深度学习环境安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/#anaconda" class="sidebar-link">Anaconda</a></li><li class="sidebar-sub-header"><a href="/guide/#pytorch" class="sidebar-link">Pytorch</a></li></ul></li><li><a href="/guide/#上传数据集" class="sidebar-link">上传数据集</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/#公开数据集" class="sidebar-link">公开数据集</a></li><li class="sidebar-sub-header"><a href="/guide/#个人数据集" class="sidebar-link">个人数据集</a></li></ul></li><li><a href="/guide/#常见问题" class="sidebar-link">常见问题</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/guide/#进阶配置" class="sidebar-link">进阶配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/#ssh免密登录" class="sidebar-link">SSH免密登录</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="用户使用手册"><a href="#用户使用手册" class="header-anchor">#</a> 用户使用手册</h1> <div class="custom-block warning"><p class="custom-block-title">使用前必读</p> <ol><li><p>禁止在上面挖矿，一旦发现即刻销毁容器！</p></li> <li><p>仅限内部使用，禁止分享给外部人员使用！</p></li> <li><p>仅限校内登录校园网使用！</p></li> <li><p>如果需要更多的资源，请先与老师沟通！</p></li> <li><p>不要卸载重装容器内的显卡驱动，否则可能用不了GPU！</p></li> <li><p>不要进行修改系统内核等危险行为！</p></li> <li><p>在使用的过程中遇到问题，可随时联系管理员</p></li></ol></div> <h2 id="默认环境"><a href="#默认环境" class="header-anchor">#</a> 默认环境</h2> <table><thead><tr><th>参数名</th> <th style="text-align:left;">参数值</th></tr></thead> <tbody><tr><td>系统</td> <td style="text-align:left;">ubuntu 20.04LTS</td></tr> <tr><td>显卡驱动</td> <td style="text-align:left;">470.129.06</td></tr> <tr><td>GPU</td> <td style="text-align:left;">1张</td></tr> <tr><td>CPU</td> <td style="text-align:left;">20%</td></tr> <tr><td>内存</td> <td style="text-align:left;">16G</td></tr> <tr><td>硬盘</td> <td style="text-align:left;">100G</td></tr></tbody></table> <h2 id="ssh远程连接"><a href="#ssh远程连接" class="header-anchor">#</a> SSH远程连接</h2> <h3 id="默认终端"><a href="#默认终端" class="header-anchor">#</a> 默认终端</h3> <ol><li><p>打开系统的默认终端，Windows 下可以使用 <code>Windows terminal</code></p> <p>如果提示 <code>ssh</code> 未安装，需要先安装 <code>ssh</code> 服务。</p></li> <li><p>使用 <code>ssh</code> 命令进行远程连接</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">ssh</span> ubuntu@10.50.128.65 -p <span class="token operator">&lt;</span>port number<span class="token operator">&gt;</span>
</code></pre></div><ul><li><p><code>ubuntu</code> 是每个容器内默认的用户名，默认密码是 123456。</p></li> <li><p><code>10.50.128.65</code> 是实验室服务器主机的<strong>固定IP</strong></p></li> <li><p><code>&lt;port number&gt;</code> 是分配给你的端口号</p></li></ul> <p>终端输出以下信息说明已登录成功</p> <p><img src="https://raw.githubusercontent.com/cloudnzk/image/main/img/terminal-ssh.png" alt=""></p></li> <li><p>修改密码</p> <p>因为容器的默认密码都是 123456，所以首次连接上后第一件事就是修改密码</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">passwd</span> root
<span class="token function">passwd</span> ubuntu
</code></pre></div></li> <li><p>查看GPU信息</p> <p>容器内已经默认安装好了显卡驱动，键入命令 <code>nvidia-smi</code> 后，可以看到 <code>test</code> 容器已经分配好了一张卡</p> <p><img src="https://raw.githubusercontent.com/cloudnzk/image/main/img/nvidia-info.png" alt=""></p></li></ol> <h3 id="vs-code"><a href="#vs-code" class="header-anchor">#</a> VS Code</h3> <p>这部分写给平时喜欢用 VS Code 的同学参考，其他同学可直接跳过，用默认终端连接即可</p> <ol><li><p>安装 <code>Remote-SSH</code> 插件</p> <p><img src="https://raw.githubusercontent.com/cloudnzk/image/main/img/remote-ssh-install.png" alt=""></p></li> <li><p>编辑连接配置文件</p> <p><img src="https://raw.githubusercontent.com/cloudnzk/image/main/img/remote-ssh-configure1.png" alt=""></p></li> <li><p>输入固定IP、用户名、端口号，点击连接</p> <p><img src="https://raw.githubusercontent.com/cloudnzk/image/main/img/remote-ssh-configure2.png" alt=""></p></li> <li><p>输入密码</p> <p>提醒一下这个输入密码的地方在 <code>vscode</code> 的正上方，眼神不好的可能还得找一会</p> <p><img src="https://raw.githubusercontent.com/cloudnzk/image/main/img/input-password.png" alt=""></p></li> <li><p>新建一个终端，Enjoy！</p> <p><img src="https://raw.githubusercontent.com/cloudnzk/image/main/img/vscode-terminal.png" alt=""></p></li></ol> <h3 id="termius"><a href="#termius" class="header-anchor">#</a> Termius</h3> <p><a href="https://termius.com/teams" target="_blank" rel="noopener noreferrer">Termius<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，一款颜值高、操作方便且功能强大的 <code>ssh</code> 客户端，有个人免费版。感兴趣的同学可以下载尝试一下</p> <p><img src="https://raw.githubusercontent.com/cloudnzk/image/main/img/termius.png" alt=""></p> <h2 id="深度学习环境安装"><a href="#深度学习环境安装" class="header-anchor">#</a> 深度学习环境安装</h2> <p>由于每个人需要用到的训练环境不同，这里只介绍一些通用的环境安装</p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>容器内默认只安装了显卡驱动，但 cuda 和 cudnn 都是没有安装的。推荐使用 conda 安装 pytorch，安装过程会自动安装与配置 cuda 和 cudnn，一步到位，免去了安装以上两者的繁琐过程。如果想要自行安装 cuda，需要注意不能超过显卡驱动（470.129.06）所支持的范围。</p></div> <h3 id="anaconda"><a href="#anaconda" class="header-anchor">#</a> Anaconda</h3> <ol><li><p>下载 Anaconda</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">mkdir</span> downloads <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> downloads
<span class="token function">wget</span> https://repo.anaconda.com/archive/Anaconda3-2022.05-Linux-x86_64.sh
</code></pre></div></li> <li><p>安装</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">bash</span> Anaconda3-2022.05-Linux-x86_64.sh
</code></pre></div></li> <li><p>创建虚拟环境并进入</p> <div class="language-shell extra-class"><pre class="language-shell"><code>conda create -n pyt <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.8</span>
conda activate pyt
</code></pre></div></li> <li><p>退出虚拟环境</p> <div class="language- extra-class"><pre class="language-text"><code>conda deactivate 
</code></pre></div></li></ol> <h3 id="pytorch"><a href="#pytorch" class="header-anchor">#</a> Pytorch</h3> <blockquote><p>参考 Pytorch 的官方文档（https://pytorch.org/），使用 conda 安装</p></blockquote> <div class="language-shell extra-class"><pre class="language-shell"><code>conda <span class="token function">install</span> pytorch torchvision torchaudio <span class="token assign-left variable">cudatoolkit</span><span class="token operator">=</span><span class="token number">11.3</span> -c pytorch
</code></pre></div><p>安装速度取决于实验室那边的网速，等待一下吧</p> <h2 id="上传数据集"><a href="#上传数据集" class="header-anchor">#</a> 上传数据集</h2> <h3 id="公开数据集"><a href="#公开数据集" class="header-anchor">#</a> 公开数据集</h3> <p>复制数据集下载链接，直接通过 wget 命令下载：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> -c https://data.statmt.org/wmt18/translation-task/preprocessed/zh-en/corpus.gz
</code></pre></div><h3 id="个人数据集"><a href="#个人数据集" class="header-anchor">#</a> 个人数据集</h3> <p>有时候我们会在本地对数据集先做一些预先处理，处理完成再上传到服务器训练。其实熟的话你直接在服务器的命令行上做也不是不行...</p> <ol><li><p><code>ssh</code>上传文件到容器的特定目录下（<strong>推荐</strong>）</p> <div class="custom-block tip"><p class="custom-block-title">建议</p> <p>文件数量多的，压缩后再上传整个压缩包</p></div> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">scp</span> -P <span class="token operator">&lt;</span>port number<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>本地文件路径<span class="token operator">&gt;</span> ubuntu@10.50.128.65:/home/ubuntu/
</code></pre></div><p>例如：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">scp</span> -P <span class="token number">60601</span> WikiMatrix.v1.en-zh.langid.tsv.gz ubuntu@10.50.128.65:/home/ubuntu/
</code></pre></div><p>以上命令代表将当前目录下的 <code>WikiMatrix.v1.en-zh.langid.tsv.gz</code> 上传到容器的用户根目录下。测试了一下上传一个300多M的文件，差不多能跑满辣鸡校园网的上传带宽，速度害行</p> <p><img src="https://raw.githubusercontent.com/cloudnzk/image/main/img/ssh-upload.png" alt=""></p> <p>上传整个目录需要添加一个 <code>-r</code> 参数：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">scp</span> -P <span class="token operator">&lt;</span>port number<span class="token operator">&gt;</span> -r <span class="token operator">&lt;</span>本地文件夹路径<span class="token operator">&gt;</span> ubuntu@10.50.128.65:/home/ubuntu/
</code></pre></div><p>例如：</p> <div class="language- extra-class"><pre class="language-text"><code>scp -P 60601 -r aliyunpan-v0.1.5-linux-amd64 ubuntu@10.50.128.65:/home/ubuntu/
</code></pre></div></li> <li><p>上传到 Gitee 仓库再 <code>git clone</code> 下来</p> <p>但 Gitee 最大只支持上传 100M 的单文件，只使用于小型数据集</p></li> <li><p>阿里云盘的命令行客户端</p> <p>优点：1、适用于大型数据集；2、可以备份数据，同步上传到云盘里</p> <blockquote><p>https://github.com/tickstep/aliyunpan</p></blockquote></li></ol> <h2 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h2> <p><strong>Q1: 安装软件/包/库中出错</strong></p> <p>A: 由于容器非常纯净，没有安装多余的软件，因此只需要根据错误提示，到谷歌搜索，安装需要的依赖即可</p> <p><strong>Q2: 为什么<code>pip</code>,<code>conda</code>,<code>git clone</code>的时候那么慢</strong></p> <p>A：国内网络的原因，可设置镜像加快下载速度。推荐使用清华源，GitHub 仓库可先一键克隆到 Gitee，再 clone 下来</p> <p><strong>Q3: 为什么没有图形界面，非得用命令行？</strong></p> <p>A： 因为实验室网速很拉，只有100M，我们校园网就更拉了，50M都不到。所以开图形界面会占用不少的网络带宽，很卡！多习惯下命令行吧，顺便练习下 <code>Linux</code> 命令（滑稽</p> <p><strong>Q4: 为什么我的 ssh 会断连</strong></p> <p>A：1、保证你的电脑在训练期间不休眠，还有保持稳定的网络。2、闲置一段时间后会自动断开连接，可修改服务器端和客户端的 <code>ssh</code> 参数。但还是建议在训练期间就保存 <code>checkpoints</code> 以防不测</p> <p>...</p> <h2 id="进阶配置"><a href="#进阶配置" class="header-anchor">#</a> 进阶配置</h2> <h3 id="ssh免密登录"><a href="#ssh免密登录" class="header-anchor">#</a> SSH免密登录</h3></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2022/6/7 下午12:06:54</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1384cd88.js" defer></script><script src="/assets/js/2.4370fa30.js" defer></script><script src="/assets/js/10.0ed138c0.js" defer></script>
  </body>
</html>
